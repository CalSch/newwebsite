<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Cal's Website > Blog > Node.js Webserver</title>

		<!-- BootStrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
    <link href="/style.css" rel="stylesheet" type="text/css" />


		<link rel="shortcut icon" type="image/png" href="/img/logo.png"/>

		<div id="syntax"></div>
	</head>
  <body>
		
		<noscript>
			<div class="noscript">
				<h3>Warning!</h3>
				<p>This webpage heavily relies on JavaScript which is disabled, please turn on JavaScript.</p>
			</div>
		</noscript>

		<!-- Navbar -->
		<div id="nav-placeholder"></div>

		<div class="container-fluid" style="margin-top:80px">
			<div class="title">
				<h1>How to make a webserver in Node.js and the Express library.</h1>
			</div>

			<div class="container">
				<div class="content p-3">
					<h3>Intro:</h3>
					<p>
						If you have ever wanted to make a webserver,
						but didn't want to use something like Apache,
						then this is the tutorial for you! <br>
						All you need is Node.js, and basic JavaScript coding skills.
					</p> <hr>
					<h3>Step one: Setting up Node.js</h3>
					<p>
						Make a new folder wherever you want, named something like <code>Webserver</code>, then open the terminal and navigate to that folder.
						Type <code>npm init -y</code> to initialize a Node.js environment, and then type <code>npm install express</code> to install the Express library.
						And thats it for the setup.
					</p> <hr>
					<h3>Step two: Writing the code</h3>
					<p>
						Create a new file called <code>index.js</code>, this is where the code will be.
						The first part is this:
<pre><code>const express = require('express');
const app = express();
const port = 8080;
</code></pre>
						This imports the express library, makes an Express app, and sets the port to <code>8080</code>.
						Next to make the webserver start, add this:
<pre><code>app.listen(port, function () {
&nbsp;&nbsp;console.log(`Listening on port ${port}!`);
});
</code></pre>
						This makes our Express app start listening for http requests, and log what port it's on.
						To make sure it's working, go into the terminal and run <code>node .</code> or <code>node index.js</code>, to run our code.
						If it says <code>Listening on port 8080!</code> then it's working, and you can type <kbd>ctrl + c</kbd> to quit.
						<br>
						Now, to make it handle http requests we add this:
<pre><code>app.get('*', (req, res) => {
&nbsp;&nbsp;res.sendFile(__dirname + "/src" + req.originalUrl, {}, (err) => {
&nbsp;&nbsp;&nbsp;&nbsp;if (err) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.status(404);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.send("404 File not found.");
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;});
});
</code></pre>
						Now, every time it gets an http request, it will send the requested file (in the <code>src</code> folder), and say <b>"404 File not found"</b> if the file doesn't exist.
						But the <code>src</code> folder does not exist, so we have to make the folder, and this is where the content is (html files, images, etc.) 
						<br>
						And thats just about it, type <code>node .</code> to run the webserver, and it should be working fine.
						To view it go to you web browser and type <code>http://localhost:8080/</code>, and that should work.

					</p>
				</div>
			</div>
			
		</div>

    <script src="/script.js"></script>
  </body>
</html>
